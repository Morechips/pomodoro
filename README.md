# Pomodoro 复盘完成页（配合 Catime 使用）

> 一个**纯前端静态网页**：在番茄钟倒计时结束时自动打开，帮助你完成“结束提醒 → 两句复盘 → 保存导出 → 休息倒计时 → 进入下一轮”的学习闭环。  
> 适用人群：习惯用番茄钟（尤其是 Catime）、希望更“纯粹”不打扰学习体验的电脑使用人群，或者你希望通过养成更好的学习习惯得到有更充实高效的学习体验

---

## 目录

- [项目背景](#项目背景)
- [编写目的](#编写目的)
- [项目亮点](#项目亮点)
- [网页总体设计](#网页总体设计)
- [功能设计](#功能设计)
- [使用指南（配合 Catime）](#使用指南配合-catime)
- [网页详细介绍](#网页详细介绍)
- [功能测试](#功能测试)
- [未来扩展可能性](#未来扩展可能性)
- [在线预览](#在线预览)

---

## 项目背景

我日常学习/写代码时会使用倒计时工具 **Catime**。Catime 支持在倒计时结束后自动打开网页，但作为“番茄钟计时器”使用时存在一个痛点：**结束后缺少明确的提醒与收尾流程**，容易让我在倒计时结束后继续学习，起不到番茄钟“专注—休息—再专注”的节奏控制作用。

同时我发现：每轮专注结束后做一次**小小的复习回顾（复盘）**，能显著提升效率与方向感；并且在一天结束后回看自己做了什么，会很有成就感。但复盘很难坚持，原因之一是它往往需要额外打开文档/笔记软件，成本较高。

因此我写了这个网页：把“结束提醒 + 两句复盘 + 自动导出 + 休息页”整合到一个纯前端页面里，并与 Catime 的“倒计时结束自动打开网页”机制结合，形成一个完整的学习链路闭环。

---

## 编写目的

本项目介绍文档用于：

1. **课程/项目提交**：按要求说明开发背景、总体设计、功能设计与测试方案。  
2. **方便展示**：清晰呈现项目目标、使用方式与亮点。  
3. **方便他人使用**：提供详细的使用流程让用户可以快速下载并上手。  

---

## 项目亮点

1. **更纯粹，不打扰学习**  
   配合 Catime 使用：专注阶段不弹窗、不占注意力；仅在倒计时结束时打开网页，提醒你“该收尾了”。

2. **复盘融入每一次番茄钟**  
   复盘难坚持的核心原因是“额外成本”。本项目把复盘强绑定在番茄钟结束的必经步骤中：只需写两句话，降低坚持门槛，同时也能更好帮助记忆。

3. **闭环体验：复盘 → 保存导出 → 休息**  
   点击一次“保存并开始休息”，即可同时导出复盘记录并进入沉浸式休息页，形成完整学习链路。

---

## 网页总体设计

### 架构概览

- **展示层（HTML/CSS）**：页面结构与主题样式，统一视觉风格。  
- **交互层（Vanilla JS）**：状态 Toast、提示音、休息 Overlay、保存导出等逻辑。  
- **配置/辅助层（Windows 脚本）**：用于本地启动与批量配置（不属于网页运行时依赖）。

### 运行形态

- **纯前端静态网页**：可直接本地打开或用脚本启动。  
- **无后端服务、无第三方依赖**。  
- **导出**通过 `Blob + <a download>` 完成（JSON/CSV）。  
- **提示音**基于 WebAudio（可能受浏览器自动播放策略影响，但不影响主流程）。

### 目录结构（核心）

```text
├─ index.html                  # 主页面（完成页 + 复盘表单 + 状态按钮 + 引入脚本/样式）
├─ pomodoro_replay.html        # 功能不完善的第一版
├─ src/
│  ├─ app.js                   # 功能模块集合（Toast、提示音、休息Overlay）
│  ├─ app-init.js              # 启动入口（统一初始化）
│  └─ rest-overlay.css         # 休息 Overlay 专属样式（隔离冲突）
├─ open.bat                    # 默认用 Edge 打开（尽量提升 autoplay 成功率）
├─ set_time_new.bat            # 时间/音效开关的命令入口
└─ set_time_value.ps1          # 改写 HTML（分钟数/音效开关 meta 等）
```

## 功能设计

### 核心流程

完成一轮专注 → 写两句复盘 → 导出保存 → 进入休息 → 休息结束退出 → 继续学习

### 功能列表（简化）

| 功能模块           | 功能描述                                         |
| ------------------ | ------------------------------------------------ |
| 完成态提醒         | 页面打开自动播放完成动效，提供明确“结束提醒”     |
| 两句复盘           | “我刚刚推进了什么？”与“下一轮最重要的一步是？”   |
| 状态选择           | 精神不错 / 还行 / 有点累（用于提示与建议）       |
| 右上角 Toast       | 轻量提示与建议，可换一组，自动消失               |
| 保存与导出         | localStorage 留存 + 自动下载 JSON/CSV            |
| 休息 Overlay       | 全屏休息页（倒计时 + 进度环 + 建议 + 结束/延长） |
| 打开提示音（可选） | WebAudio 合成音；受自动播放策略影响但有兜底      |
| 脚本配置（可选）   | 一键切换 25/50/90/自定义分钟；一键开关提示音     |

### 时长设计（25 / 50 / 90）

- **25 / 50 分钟**：经典番茄钟设置，适合常规学习任务。  
- **90 分钟**：贴合计算机专业学生与写代码等有长期电脑工作学习任务人群——写代码常需要更长专注才能产出，且不应频繁打断心流。

---

## 使用指南（配合 Catime）

- Catime 官网：<https://vladelaina.github.io/Catime/>

### A. 下载本项目（推荐：Download ZIP）

1. 进入本仓库页面，点击右上角 **Code**
2. 选择 **Download ZIP**
3. 解压到固定位置（放一个你找得到的地方，后续直接本地打开就好）

### B. 本地运行网页

- **最简单**：直接双击打开 `index.html`。
- **推荐**：用 `open.bat` 启动（如果需要网页的自动播放提示音的话，但不能保证一定可以自动播放）。

### C. 配置 Catime：倒计时结束自动打开网页

**目标**：倒计时结束时自动打开本项目 `index.html`，进入复盘与休息流程。

通用步骤（不同版本的菜单命名可能略有差异）：

1. 打开 Catime 设置（托盘图标/设置菜单）。

<a href="https://cdn.jsdelivr.net/gh/Morechips/blog-images@main/%E9%85%8D%E7%BD%AEcatime%E6%8C%87%E5%BC%95.jpg" target="_blank">
  <img src="https://cdn.jsdelivr.net/gh/Morechips/blog-images@main/%E9%85%8D%E7%BD%AEcatime%E6%8C%87%E5%BC%95.jpg"
       alt="Catime 设置引导（点击查看原图）"
       width="240">
</a>




2. 找到与“倒计时结束动作 / Timeout Action / 结束后操作”相关的选项。
3. 选择“打开文件 / 打开网页 / 打开指定内容”。
4. 指向本项目的 `index.html`：
   - 推荐：选择本地文件（`index.html` 的路径）（推荐使用open脚本打开默认谷歌，亲测音效正常播放）
5. 保存后做一次短倒计时测试：结束时能自动打开网页即配置成功。

### D. 日常使用

1. 打开set_time_new.bat脚本设置时长和是否开启提示音
2. 在 Catime 选择本轮专注时长（25/50/90 或自定义），开始倒计时。
3. 倒计时结束 → 网页自动打开（完成提醒）。
4. 填写两句复盘：（想填就填吧，回忆一下就会有收获哦）
   - done：我刚刚推进了什么？
   - next：下一轮最重要的一步是？
5. 选择状态：精神不错 / 还行 / 有点累（会触发右上角 Toast）。
6. 点击 **保存并开始休息**：导出文件 + 进入休息页。（开一个文件夹用来存json总结文件）
7. 休息结束或手动结束 → 关闭休息页 → 回到完成页 → 开始下一轮专注。
8. 一天结束后可以把这些文件都丢给ai，得到一天总结

---

## 网页详细介绍

### 1, 为什么它更“纯粹”

本项目尽量减少对注意力的侵占：不做常驻桌宠、不堆叠复杂功能。它只在倒计时结束时出现，让你快速完成复盘与休息，从而保持学习体验稳定。

### 2, 为什么要绑定复盘

复盘是好习惯，但难坚持往往是因为“需要额外打开文档/笔记工具”。本项目把复盘耦合在每一次番茄钟结束时：两句话即可完成，降低摩擦成本，同时增强记忆与方向感。

### 3, 为什么要有休息页

休息页让番茄钟真正闭环：不仅提醒你停下来，还提供倒计时、建议与沉浸式体验，帮助你更舒心地休息，并更自然进入下一轮。

---

## 功能测试

### 测试环境

- Windows 10/11  
- Edge / Chrome  
- 打开方式：双击 `index.html` 或执行 `open.bat`

### 测试用例（可提交版）

| 用例ID | 模块         | 测试步骤            | 结果                                 |
| ------ | ------------ | ------------------- | ------------------------------------ |
| T-01   | 页面加载     | 打开 `index.html`   | 页面正常渲染，无阻断错误             |
| T-02   | 完成动效     | 刷新页面、点击重播  | 动效可自动播放且可重播               |
| T-03   | 状态选择     | 点击三种状态        | 仅当前按钮高亮，状态正确记录         |
| T-04   | Toast        | 点击状态按钮        | 右上角弹出提示，可更换建议，自动消失 |
| T-05   | 导出         | 填 done/next → 保存 | 下载 JSON/CSV 文件，内容字段完整     |
| T-06   | localStorage | 保存后查看存储      | 本地记录追加写入                     |
| T-07   | 休息页打开   | 点击保存并开始休息  | Overlay 打开，展示倒计时与复盘       |
| T-08   | 休息交互     | 结束/延长/关闭      | 行为正确，Overlay 可退出             |
| T-09   | 提示音开关   | meta=off 再打开     | 不播放提示音（不影响主流程）         |
| T-10   | 脚本配置     | 运行设置脚本        | 分钟显示更新，中文不乱码             |

### 测试结论

核心链路（完成提醒→复盘→导出→休息→退出）可正常工作；提示音在不同浏览器可能受自动播放策略影响，但不会影响主要功能使用。

## 未来扩展可能性（Roadmap / Future Work）

- **历史记录回看（主页面折叠区）**  
  在主页面新增“历史记录 / 今日回顾”折叠区域，直接读取 `localStorage` 中的复盘数据并按时间倒序展示。  
  进一步可加入：按日期筛选、关键词搜索、按状态（精神不错/还行/有点累）筛选，并支持一键导出“某一天/某一周”的汇总 CSV。

- **跨平台与更强的 Catime 集成**  
  当前以 Catime 的“倒计时结束动作”触发打开网页为主。未来将可以跨平台/多环境的配置说明与兼容策略，例如：  
  - Windows / macOS / Linux 下的配置差异与替代方案  
  - 对“浏览器自动播放策略”的更明确指引（提示音可选，不影响主流程）

- **与 4 象限规划网联动：更深度的个人时间管理闭环**  
  将“每轮番茄钟复盘”与“任务优先级（重要/紧急）”结合：  
  - 保存复盘时可选择或自动归类到四象限（重要且紧急 / 重要不紧急 / 不重要但紧急 / 不重要不紧急）  
  - 将“下一轮最重要的一步”直接沉淀到四象限规划中，形成“复盘 → 计划 → 执行”的闭环

- **统计与可视化（轻量图表）**  
  增加日/周/月维度统计：专注次数、总专注时长、不同状态分布、连续专注天数等，并以简单图表展示趋势，让回顾更直观。

---

## 在线预览

> 预览地址：https://morechips.github.io/pomodoro/

---

## 结语

这个项目的目标不是做一个“功能最全”的番茄钟，而是提供一种**更纯粹、低打扰**的学习收尾方式：  
让“倒计时结束 → 写两句复盘 → 保存导出 → 舒心休息”成为每一轮专注后的自然动作，从而更容易长期坚持，形成稳定的学习节奏与可回看的成长记录。



<p align="center"><span style="color:#888;">小习惯创造大价值</span></p>
